[mypy]
# mypy設定ファイル - 教育計画PDFマージシステム
# 厳格な型チェックを有効化

# === 基本設定 ===
python_version = 3.8
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = False  # 段階的導入のためFalse（将来的にTrue推奨）
disallow_any_unimported = False

# === 型チェックの厳格度 ===
# None許容チェック
no_implicit_optional = True
strict_optional = True

# エラー検出
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

# === サードパーティライブラリ ===
# 型スタブがないライブラリは無視
ignore_missing_imports = True

# === 除外設定 ===
exclude = (?x)(
    ^venv/
    | ^build/
    | ^dist/
    | ^installer/
    | \.pyc$
  )

# === モジュール別設定 ===

# コア処理モジュール（厳格）
[mypy-pdf_merge_orchestrator]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-document_collector]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-pdf_converter]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-pdf_processor]
disallow_untyped_defs = True
disallow_incomplete_defs = True

# 例外・定数（厳格）
[mypy-exceptions]
disallow_untyped_defs = True

[mypy-constants]
disallow_untyped_defs = True

# セキュリティ関連（厳格）
[mypy-path_validator]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-logging_config]
disallow_untyped_defs = True

# GUI層（緩和 - tkinterの型定義が不完全なため）
[mypy-gui.*]
disallow_untyped_defs = False
warn_return_any = False

# COM連携（緩和 - win32comの型定義がないため）
[mypy-converters.office_converter]
disallow_untyped_defs = False
warn_return_any = False

[mypy-converters.ichitaro_converter]
disallow_untyped_defs = False
warn_return_any = False

# テスト（緩和）
[mypy-tests.*]
disallow_untyped_defs = False
